-- DROP SCHEMA dbo;

CREATE SCHEMA dbo;
-- umg_ecomerce.dbo.Usuario definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.Usuario;

CREATE TABLE umg_ecomerce.dbo.Usuario (
	id int NOT NULL,
	Usuario nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	nombre nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	apellido nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	contrase√±a nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	email nvarchar(100) COLLATE Modern_Spanish_CI_AS NULL,
	rol bigint NULL,
	estatus bit NULL,
	fecha_creacion datetime NULL,
	usuario_creo nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	fecha_modificacion datetime NULL,
	usuario_modifico nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	CONSTRAINT PK__Usuario__3213E83FCF3D0CB0 PRIMARY KEY (id)
);


-- umg_ecomerce.dbo.bitacora_general definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.bitacora_general;

CREATE TABLE umg_ecomerce.dbo.bitacora_general (
	id bigint NOT NULL,
	tabla nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	id_tabla nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	campo nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	valor_anterior nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	valor_nuevo nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	usuario nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	fecha datetime NULL,
	CONSTRAINT PK__bitacora__3213E83F7B9FC053 PRIMARY KEY (id)
);


-- umg_ecomerce.dbo.categorias definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.categorias;

CREATE TABLE umg_ecomerce.dbo.categorias (
	id_categoria bigint NOT NULL,
	nombre_categoria nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	descripcion_categoria nvarchar(100) COLLATE Modern_Spanish_CI_AS NULL,
	fecha_creacion datetime NULL,
	fecha_modificacion datetime NULL,
	usuario_adicion nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	usuario_modifico nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	CONSTRAINT PK__categori__CD54BC5A0CB1B66B PRIMARY KEY (id_categoria)
);


-- umg_ecomerce.dbo.temporadas definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.temporadas;

CREATE TABLE umg_ecomerce.dbo.temporadas (
	id_temporada bigint NOT NULL,
	nombre_temporada nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	fecha_inicio datetime NULL,
	fecha_fin datetime NULL,
	fecha_creacion datetime NULL,
	usuario_adicion nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	CONSTRAINT PK__temporad__2298374319E04295 PRIMARY KEY (id_temporada)
);


-- umg_ecomerce.dbo.tipo_catalogos definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.tipo_catalogos;

CREATE TABLE umg_ecomerce.dbo.tipo_catalogos (
	id bigint NOT NULL,
	nombre nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	fecha_creacion datetime NULL,
	fecha_modificacion datetime NULL,
	usuario_adicion nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	usuario_modifico nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	CONSTRAINT PK__tipo_cat__3213E83F7545FE70 PRIMARY KEY (id)
);


-- umg_ecomerce.dbo.carro_compras definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.carro_compras;

CREATE TABLE umg_ecomerce.dbo.carro_compras (
	id_carro bigint NOT NULL,
	id_cliente int NULL,
	fecha_creacion datetime NULL,
	estado nvarchar(25) COLLATE Modern_Spanish_CI_AS NULL,
	CONSTRAINT PK__carro_co__D3C318A169A4330F PRIMARY KEY (id_carro),
	CONSTRAINT FK_carro_compras_usuario FOREIGN KEY (id_cliente) REFERENCES umg_ecomerce.dbo.Usuario(id)
);


-- umg_ecomerce.dbo.catalogos definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.catalogos;

CREATE TABLE umg_ecomerce.dbo.catalogos (
	codigo_catalogo bigint NOT NULL,
	nombre_catalogo nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	descripcion_catalogo nvarchar(100) COLLATE Modern_Spanish_CI_AS NULL,
	fecha_creacion datetime NULL,
	estado bit NULL,
	fecha_modificacion datetime NULL,
	usuario_adicion nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	usuario_modificacion nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	CONSTRAINT PK__catalogo__7EF6B7F5D8A1DAFD PRIMARY KEY (codigo_catalogo),
	CONSTRAINT FK_catalogos_tipo_catalogos FOREIGN KEY (codigo_catalogo) REFERENCES umg_ecomerce.dbo.tipo_catalogos(id)
);


-- umg_ecomerce.dbo.facturas definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.facturas;

CREATE TABLE umg_ecomerce.dbo.facturas (
	id_factura bigint NOT NULL,
	id_cliente int NULL,
	fecha_factura datetime NULL,
	total decimal(18,2) NULL,
	estado_pago nvarchar(25) COLLATE Modern_Spanish_CI_AS NULL,
	metodo_pago nvarchar(25) COLLATE Modern_Spanish_CI_AS NULL,
	fecha_creacion datetime NULL,
	CONSTRAINT PK__facturas__6C08ED53318E2109 PRIMARY KEY (id_factura),
	CONSTRAINT FK_facturas_usuario FOREIGN KEY (id_cliente) REFERENCES umg_ecomerce.dbo.Usuario(id)
);


-- umg_ecomerce.dbo.metodos_pago definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.metodos_pago;

CREATE TABLE umg_ecomerce.dbo.metodos_pago (
	id_pago bigint NOT NULL,
	id_cliente int NULL,
	tipo_tarjeta nvarchar(25) COLLATE Modern_Spanish_CI_AS NULL,
	numero_tarjeta nvarchar(100) COLLATE Modern_Spanish_CI_AS NULL,
	fecha_vencimiento datetime NULL,
	nombre_titular nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	fecha_creacion datetime NULL,
	CONSTRAINT PK__metodos___0941B0741D911469 PRIMARY KEY (id_pago),
	CONSTRAINT FK_metodos_pago_usuario FOREIGN KEY (id_cliente) REFERENCES umg_ecomerce.dbo.Usuario(id)
);


-- umg_ecomerce.dbo.productos_carro definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.productos_carro;

CREATE TABLE umg_ecomerce.dbo.productos_carro (
	id_producto_carro bigint NOT NULL,
	id_carro bigint NULL,
	id_producto bigint NULL,
	cantidad int NULL,
	precio_unitario decimal(18,2) NULL,
	fecha_creacion datetime NULL,
	CONSTRAINT PK__producto__7892CA1715B0E0C3 PRIMARY KEY (id_producto_carro),
	CONSTRAINT FK_productos_carro_carro_compras FOREIGN KEY (id_carro) REFERENCES umg_ecomerce.dbo.carro_compras(id_carro)
);


-- umg_ecomerce.dbo.subcategorias definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.subcategorias;

CREATE TABLE umg_ecomerce.dbo.subcategorias (
	id_subcategoria bigint NOT NULL,
	id_categoria bigint NULL,
	nombre_subcategoria nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	fecha_creacion datetime NULL,
	fecha_modificacion datetime NULL,
	usuario_adicion nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	usuario_modifico nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	CONSTRAINT PK__subcateg__FDB38B9E3BBDAB8B PRIMARY KEY (id_subcategoria),
	CONSTRAINT FK_subcategorias_categorias FOREIGN KEY (id_categoria) REFERENCES umg_ecomerce.dbo.categorias(id_categoria)
);


-- umg_ecomerce.dbo.productos definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.productos;

CREATE TABLE umg_ecomerce.dbo.productos (
	id_producto bigint NOT NULL,
	nombre_producto nvarchar(100) COLLATE Modern_Spanish_CI_AS NULL,
	descripcion_producto nvarchar(255) COLLATE Modern_Spanish_CI_AS NULL,
	precio decimal(18,2) NULL,
	id_subcategoria bigint NULL,
	fecha_creacion datetime NULL,
	fecha_modificacion datetime NULL,
	usuario_adicion nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	usuario_modifico nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	codigo_catalogo bigint NULL,
	CONSTRAINT PK__producto__FF341C0D54186C52 PRIMARY KEY (id_producto),
	CONSTRAINT FK_productos_catalogos FOREIGN KEY (codigo_catalogo) REFERENCES umg_ecomerce.dbo.catalogos(codigo_catalogo),
	CONSTRAINT FK_productos_subcategorias FOREIGN KEY (id_subcategoria) REFERENCES umg_ecomerce.dbo.subcategorias(id_subcategoria)
);


-- umg_ecomerce.dbo.productos_facturados definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.productos_facturados;

CREATE TABLE umg_ecomerce.dbo.productos_facturados (
	id_producto_factura bigint NOT NULL,
	id_factura bigint NULL,
	id_producto bigint NULL,
	cantidad int NULL,
	precio_unitario decimal(18,2) NULL,
	fecha_creacion datetime NULL,
	CONSTRAINT PK__producto__B21BD508C765A7BC PRIMARY KEY (id_producto_factura),
	CONSTRAINT FK_productos_facturados_factura FOREIGN KEY (id_factura) REFERENCES umg_ecomerce.dbo.facturas(id_factura),
	CONSTRAINT FK_productos_facturados_productos FOREIGN KEY (id_producto) REFERENCES umg_ecomerce.dbo.productos(id_producto)
);


-- umg_ecomerce.dbo.productos_temporada definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.productos_temporada;

CREATE TABLE umg_ecomerce.dbo.productos_temporada (
	id_producto bigint NOT NULL,
	id_temporada bigint NOT NULL,
	fecha_creacion datetime NULL,
	CONSTRAINT PK__producto__DD1D9F795CDC18E3 PRIMARY KEY (id_producto,id_temporada),
	CONSTRAINT FK_productos_temporada_productos FOREIGN KEY (id_producto) REFERENCES umg_ecomerce.dbo.productos(id_producto),
	CONSTRAINT FK_productos_temporada_temporadas FOREIGN KEY (id_temporada) REFERENCES umg_ecomerce.dbo.temporadas(id_temporada)
);


-- umg_ecomerce.dbo.images definition

-- Drop table

-- DROP TABLE umg_ecomerce.dbo.images;

CREATE TABLE umg_ecomerce.dbo.images (
	id_imagen bigint NOT NULL,
	id_producto bigint NULL,
	url nvarchar(100) COLLATE Modern_Spanish_CI_AS NULL,
	fecha_creacion datetime NULL,
	usuario_adicion nvarchar(50) COLLATE Modern_Spanish_CI_AS NULL,
	CONSTRAINT PK__images__27CC26894510B987 PRIMARY KEY (id_imagen),
	CONSTRAINT FK_images_productos FOREIGN KEY (id_producto) REFERENCES umg_ecomerce.dbo.productos(id_producto)
);